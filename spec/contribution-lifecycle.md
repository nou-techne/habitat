# Contribution Lifecycle

*Sprint 8 — Building on: [Treasury Reporting](treasury-reporting.md)*

---

## Overview

Phase 1 built the Foundation: accounts, transactions, balances, reports. Phase 2 begins here with the question that animates cooperative economics: *who contributed what?*

A contribution is any transfer of value from a member to the organization — labor, cash, property, or community-building activity. The contribution lifecycle is the path from "I did something" to "my capital account reflects it." Every step must be auditable, because the patronage allocation (Phase 3) depends entirely on the integrity of contribution data.

## Contribution Types

| Type | Description | Entry Method | Valuation |
|------|------------|-------------|-----------|
| **Cash** | Direct monetary contribution | Bank deposit, wire, crypto transfer | Face value |
| **Labor** | Time spent on organizational work | Hours logged by member | Rate × hours (see Sprint 9) |
| **In-kind** | Property, equipment, materials | Member declaration + approval | Fair market value at contribution date |
| **Revenue attribution** | Revenue generated by member activity | System-derived from invoicing/sales data | Actual revenue amount |
| **Community** | Non-labor participation: governance, mentoring, events | Hours or activity logged by member | Rate × hours or flat value (see Sprint 9) |

Each type follows the same lifecycle but may differ in valuation rules (Sprint 9) and approval requirements (Sprint 10).

## The Lifecycle

```
  Logged → Pending Review → Approved → Valued → Applied
                ↓                                  ↓
            Rejected                     Treasury Transaction
                ↓                          (capital account)
           (with reason)
```

### Stage 1: Logged

The member records that a contribution occurred.

**Contribution record:**

| Field | Purpose |
|-------|---------|
| `id` | Unique identifier |
| `member_id` | Who contributed |
| `type` | Cash, labor, in-kind, revenue, community |
| `date` | When the contribution occurred |
| `logged_at` | When the record was created |
| `quantity` | Amount: dollars (cash), hours (labor/community), units (in-kind) |
| `description` | What was done, what was contributed |
| `evidence` | Optional: receipt, time log screenshot, photo of donated equipment |
| `period_id` | Which accounting period this falls within |
| `status` | `logged` |
| `metadata` | Extensible: project code, category, location |

**Design decision:** Members log their own contributions. This is a deliberate choice — it respects member autonomy and creates the most accurate record, because the contributor knows what they did. The approval step (Stage 2) provides the check.

**Mobile-first logging:** Per the quality criteria, common tasks should take under 30 seconds from a mobile device. The logging interface should default to the member's most common contribution type, pre-fill date to today, and require only quantity + description for a complete entry.

### Stage 2: Pending Review

The contribution awaits approval from an authorized reviewer.

Who reviews depends on the organization's configured approval model (Sprint 10). Options range from single admin to peer validation. At this stage the record's status is `pending`.

**What the reviewer sees:**
- Contribution details (type, quantity, description, evidence)
- Member's contribution history for context
- Period totals so far (to spot anomalies)
- Valuation preview (what this contribution will be worth once approved)

**Reviewer actions:**
- **Approve** → moves to Stage 3
- **Reject** → status becomes `rejected`, reason recorded, member notified
- **Request clarification** → status stays `pending`, comment thread opened

Rejected contributions are never deleted. They remain in the record with their rejection reason — this protects both the member (who can see why it was rejected) and the organization (audit trail).

### Stage 3: Approved

The reviewer has confirmed the contribution is legitimate. Status becomes `approved`.

At this point the contribution is factual — it happened, it's verified. But it doesn't yet have a dollar value (for non-cash types) and hasn't yet affected the capital account.

### Stage 4: Valued

The system applies valuation rules (Sprint 9) to convert the contribution into a dollar amount.

For cash contributions, this is trivial — the dollar amount equals the contributed amount. For labor and community contributions, valuation rules assign a rate. For in-kind contributions, fair market value is determined.

**Valued contribution record:**

| Field | Purpose |
|-------|---------|
| `valued_amount` | Dollar value of the contribution |
| `valuation_rule_id` | Which rule was applied |
| `valuation_date` | When the valuation was performed |
| `basis_book` | Book value (FMV for 704(b)) |
| `basis_tax` | Tax basis (may differ for in-kind) |

The valuation step is separated from approval because rates may change. If the organization updates its labor rate from $75/hour to $100/hour, only contributions valued *after* the change use the new rate. Previously valued contributions are not retroactively adjusted (unless the organization explicitly decides otherwise — see Open Questions).

### Stage 5: Applied

The valued contribution generates Treasury transactions that credit the member's capital account.

**Event published:** `contribution.applied`

**Treasury receives and creates:**
- Book basis transaction: Debit appropriate asset account / Credit 3100-{member} Book Capital
- Tax basis transaction: Debit appropriate asset account / Credit 3200-{member} Tax Capital
- 704(c) layer if book ≠ tax (in-kind contributions)

Status becomes `applied`. The contribution's `event_id` links it to the Treasury transactions, establishing the full audit trail from "I logged 4 hours" to "my capital account increased by $300."

## Contribution Record — Complete Schema

```
Contribution
├── id                (uuid)
├── member_id         (references People)
├── type              (cash | labor | in_kind | revenue | community)
├── date              (when the contribution occurred)
├── logged_at         (when the record was created)
├── period_id         (accounting period)
├── quantity          (decimal — dollars, hours, or units)
├── unit              (USD | hours | units)
├── description       (what was done/contributed)
├── evidence[]        (attachments, links)
├── status            (logged | pending | approved | rejected | valued | applied)
├── status_history[]  (timestamped status changes with actor and reason)
├── reviewer_id       (who approved/rejected)
├── reviewed_at       (when)
├── rejection_reason  (if rejected)
├── valued_amount     (dollar value after valuation)
├── valuation_rule_id (which rule was applied)
├── basis_book        (book value)
├── basis_tax         (tax basis)
├── event_id          (links to Treasury transaction after applied)
└── metadata          (project, category, tags)
```

## Querying Contributions

| Query | Use |
|-------|-----|
| My contributions this period | Member dashboard |
| Pending contributions (all members) | Reviewer queue |
| Contributions by type for period | Patronage formula inputs |
| Member's total valued contributions | Allocation calculation input |
| Contribution vs. capital account reconciliation | Audit: do all applied contributions have Treasury entries? |
| Rejection history | Pattern analysis, process improvement |

## Timing and Boundaries

Contributions must be logged within the period they occurred. The system enforces:

- **Period boundary:** A contribution dated in Q1 cannot be logged after Q1 closes (Sprint 13 handles period close)
- **Grace period:** Configurable window after period end for late logging (e.g., 7 days after quarter end). After grace period, contributions for that period require manager override.
- **Retroactive logging:** Possible with manager approval and documented reason. Creates an adjustment event, not a modification of historical records.

## Connection to Next Sprint

Sprint 9 (Valuation Rules) will define how non-cash contributions are converted to dollar values — the rate structures, update procedures, and edge cases that make Stage 4 work. The question of what an hour of labor is "worth" is one of the most politically significant decisions a cooperative makes, and the system must handle it with both precision and flexibility.

---

*Sprint 8 | February 8, 2026 | Habitat*
